<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WW2 Airplane Game</title>
<style>
    body {
        background: #1c1c1c;
        margin: 0;
        overflow: hidden;
        color: white;
        font-family: Arial, sans-serif;
    }

    #ui {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 10;
        font-size: 20px;
    }

    canvas {
        display: block;
        background: linear-gradient(#6ea0ff, #3b5a88);
    }
</style>
</head>
<body>

<div id="ui">
    <div>Score: <span id="score">0</span></div>
    <div>Health: <span id="health">100</span></div>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let keys = {};
let score = 0;
let health = 100;

// PLAYER PLANE
const player = {
    x: canvas.width / 2,
    y: canvas.height - 150,
    w: 80,
    h: 40,
    speed: 6,
    bombs: []
};

// ENEMIES
let enemies = [];

function spawnEnemy() {
    enemies.push({
        x: Math.random() * (canvas.width - 60),
        y: -60,
        w: 60,
        h: 30,
        speed: 2 + Math.random() * 3
    });
}
setInterval(spawnEnemy, 1300);

// DRAW PLAYER (WW2 STYLE)
function drawPlane(p) {
    ctx.save();
    ctx.translate(p.x, p.y);

    // Body
    ctx.fillStyle = "#c0c0c0";
    ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);

    // Nose
    ctx.fillStyle = "#999";
    ctx.fillRect(p.w/2 - 10, -p.h/3, 20, p.h/1.5);

    // Wings
    ctx.fillStyle = "#b0b0b0";
    ctx.fillRect(-p.w/1.2, -p.h/2, p.w*1.4, 10);
    ctx.fillRect(-p.w/1.2, p.h/2 - 10, p.w*1.4, 10);

    ctx.restore();
}

// DRAW ENEMY PLANE
function drawEnemy(e) {
    ctx.save();
    ctx.translate(e.x + e.w/2, e.y + e.h/2);

    ctx.fillStyle = "#884444";
    ctx.fillRect(-e.w/2, -e.h/2, e.w, e.h);
    ctx.fillStyle = "#553333";
    ctx.fillRect(-e.w/2 + 10, -e.h/4, e.w - 20, e.h/2);

    ctx.restore();
}

// GAME LOOP
function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Movement
    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;
    if (keys["ArrowUp"]) player.y -= player.speed;
    if (keys["ArrowDown"]) player.y += player.speed;

    // Boundaries
    player.x = Math.max(40, Math.min(canvas.width - 40, player.x));
    player.y = Math.max(40, Math.min(canvas.height - 40, player.y));

    // Draw Player
    drawPlane(player);

    // Bombs
    player.bombs.forEach((b, i) => {
        b.y += b.speed;
        ctx.fillStyle = "black";
        ctx.beginPath();
        ctx.arc(b.x, b.y, 6, 0, Math.PI * 2);
        ctx.fill();

        if (b.y > canvas.height) player.bombs.splice(i, 1);
    });

    // Enemies Movement + Draw
    enemies.forEach((e, ei) => {
        e.y += e.speed;
        drawEnemy(e);

        if (e.y > canvas.height) {
            enemies.splice(ei, 1);
            health -= 10;
        }

        // Collision with Bombs
        player.bombs.forEach((b, bi) => {
            if (
                b.x > e.x &&
                b.x < e.x + e.w &&
                b.y > e.y &&
                b.y < e.y + e.h
            ) {
                // Explosion
                ctx.fillStyle = "orange";
                ctx.beginPath();
                ctx.arc(e.x + e.w/2, e.y + e.h/2, 30, 0, Math.PI * 2);
                ctx.fill();

                enemies.splice(ei, 1);
                player.bombs.splice(bi, 1);
                score += 50;
                document.getElementById("score").innerText = score;
            }
        });
    });

    document.getElementById("health").innerText = health;

    if (health > 0) requestAnimationFrame(update);
    else gameOver();
}

function gameOver() {
    ctx.fillStyle = "white";
    ctx.font = "60px Arial";
    ctx.fillText("GAME OVER", canvas.width/2 - 150, canvas.height/2);
}

// KEY HANDLING
document.addEventListener("keydown", (e) => {
    keys[e.key] = true;

    // Bomb drop
    if (e.key === " ") {
        player.bombs.push({
            x: player.x,
            y: player.y + 20,
            speed: 7
        });
    }
});

document.addEventListener("keyup", (e) => {
    keys[e.key] = false;
});

update();
</script>
</body>
</html>

